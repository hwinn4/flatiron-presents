<!-- NOTE: To view the map, open the file with a server -->
<!--NOTE: This branch draws on a geojson file that includes neighborhood names-->
<!-- geojson source: http://catalog.civicdashboards.com/dataset/eea7c03e-9917-40b0-bba5-82e8e37d6739/resource/91778048-3c58-449c-a3f9-365ed203e914/download/06463a12c2104adf86335df0170c25e3pediacitiesnycneighborhoods.geojson--> 

<!DOCTYPE html>
<head>
<meta charset="utf-8">

<style>
/*#neighborhood {
  stroke: grey;
  stroke-width: 2px;
  fill: gray;
}*/

path:hover {
  fill:red;  
}

</style>

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
  <div id="neighborhood_details">
    <p>Click on a neighborhood for details</p>
  </div>

<script>

// set width and height vars
var width = 1550,
   height = 1000;

// creates the root svg element
// (basically the canvas)
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

// callback
// nyb is the entire json collection
  d3.json("nycneighborhoods.geojson", function(error, nyb) {

    console.log(nyb)

    // projects spherical coordinate to the Cartesian plane
    var projection = d3.geo.mercator()
            .center([-73.94, 40.70])
            .scale(90000)
            .translate([(width) / 2, (height)/2]);

    // formats the projects for SVG 
    var path = d3.geo.path()
        .projection(projection);

    // "g" is a container el for grouping
    // related graphics elements
    // Grouped objects can be transformed together
    // like a single shape
    // THIS LINE: appends a g tag to the 
    // root svg el
    var g = svg.append("g");

    // appends another g tag
    // to the previous one
    g.append("g")
      .attr("id", "nyc")
      .selectAll(".row") // select all rows in feature collection
      .data(nyb.features) // bind data to each row?
      .enter().append("path") // create path element for each feature
      .attr("id", "neighborhood") // assign each path el an id
      .attr("class", function(d){ return d.properties.neighborhood; }) // class if neighborhood name
      .attr("d", path) // "d" = path
      .attr('x', function(d){
        return path.centroid(d)[0];
      })
      .attr('y', function(d){
        return path.centroid(d)[1];
      })
      .text(function(d){
        return d.properties.neighborhood;
      })
      .on('click', function(d,i){
        console.log($(this).text());
      });
  });

</script>
</body>
</html>